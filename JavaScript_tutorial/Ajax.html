<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>11章 非同期処理とAjax</title>
  </head>
    <body>
      <h1>JavaScript関連の最新記事 by Qiita</h1>
      
      <button id="btn">更新</button>
      <ul id="list"></ul>
      
      <script>
        const url = 'https://qiita.com/api/v2/tags/javascript/items';
        const btn = document.getElementById("btn");
        const list = document.getElementById("list");
        
        const createList = item => {
          const li = document.createElement("li");
          const a = document.createElement("a");
          
          a.href = item.url;
          li.textContent = item.title;
          
          a.appendChild(li);
          list.appendChild(a);
        };
        
        btn.addEventListener('click', () => {
          list.innerHTML = ''; //結果表示部分をリセット
          
          fetch(url)
          .then(data => data.json())
          //.then(data => console.log(data))
          .then(data => {
              data.forEach(item => {
                createList(item);
                console.log(item);
              });
        
          });
      
        });
        
       
      </script>
    </body>
</html>